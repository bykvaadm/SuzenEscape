---
- hosts: registry
  gather_facts: no
  tags: [dockreg]
  roles:
  - { role: python3,        tags: [python] }
  - { role: install_docker, tags: [install_docker] }
  - { role: registry,       tags: [registry] }
  vars_files: [global_params.yaml]

- hosts: web
  gather_facts: no
  tags: [web]
  roles:
  - { role: python3,        tags: [python] }
  - { role: install_docker, tags: [install_docker] }
  - { role: deploy_web,     tags: [deploy_web] }
  vars_files: [global_params.yaml]

- hosts: tasks
  gather_facts: no
  tags: [tasks]
  roles:
  - { role: python3,        tags: [python] }
  - { role: install_docker, tags: [install_docker], when: install_docker }
  - { role: build_tasks,    tags: [build_tasks] }
  - { role: deploy_tasks,   tags: [deploy_tasks] }
  vars_files: [global_params.yaml, vars.yaml]
